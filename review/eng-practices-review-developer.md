### Review 最佳实践（开发者）

> https://google.github.io/eng-practices/review/developer/

1. 写好描述

    1. 第一行

        简单介绍做了什么事情，命令语气

    2. 描述

        1. 介绍 fix 的 bug？
        2. 为什么这么改？
        3. 具体怎么改的？
        4. 这个问题的上下文信息
        5. 可能更好的方案？

2. 提交的修改尽可能小

    1. 为什么？
        1. review 快
        2. review 得彻底
        3. 不太容易有bug
        4. pr被拒时损失不大
        5. 更容易合入
        6. 进行review时不太会影响继续coding
        7. 回退简单
    2. 修改小的提交需要满足什么条件？
        1. 独立，不依赖别的提交
            1. 只做一件事
            2. 描述要能使 reviewer 理解修改
            3. 合入这个提交后，代码能运行成功
            4. 不能小到难以理解，例如 API 代码和使用API的代码要在一个提交里
        2. 和 reviewer 充分交流确定一个提交合适的修改量
        3. 时刻记住 reviewer 没有你熟悉代码修改
    3. 什么时候大量修改的提交也是OK的？
        1. 删除一个文件可以看作一行修改
        2. 自动生成的代码，只需要考虑生成的逻辑
    4. 重构需要单独作为一个提交
        1. 代码重构和bug修复或新增的feature应该放在不同的提交里
        2. 不过类似本地变量重命名这样的小重构不需要遵守这个规则，这需要你和reviewer达成共识
    5. 功能测试代码需要和功能修改在一个提交
    6. 每个提交都应保证代码可以正常编译、运行
    7. 实在不能减少提交的修改量
        1. 试着把这个提交拆成好几个小的
        2. 通过重构优化架构使得可以拆成小提交，可以向同事或者reviewer求助
        3. 上面两步都失败后，通知 reviewer 准备 review 一个大提交，要小心不要引入 bug，并写充分的测试代码。

3. 怎么应对 reviewer 的反馈？

    1. 不要把反馈看作是对你的成见

        1. 记着 reviewer 的反馈是为了帮助你提高你的代码质量
        2. 忽略消极评论，找出建设性的信息
        3. 不要在生气的时候回复反馈，试着通过散步或者做别的事情来平复心情，然后再来回复
        4. 如果 reviewer 不能礼貌地提供反馈，可以先私下交流表达你不喜欢他的反馈方式，如果还不行可以反馈给你的leader

    2. 修复代码

        遇到 reviewer 不明白的代码按照下面顺序修改：

        	1. 代码
         	2. 代码中添加注释
         	3. 在 review 工具中解释

    3. 为你自己考虑

        完成一个提交通常需要花费很多精力，提了一个PR后，通常觉得工作已经做完了。这个时候 reviewer 指出有一些地方可以优化后，你会非常容易觉得 reviewer 是错的，故意不通过你的 PR。不管你多么肯定，静下心好好想一下 reviewer 的反馈是不是对的？

        如果经过考虑确实发现你的提交是最好的解决方案，那就和 reviewer 解释为什么你的方案是最好的，并同时补充 reviewer 可能不知道的上下文，毕竟你对这个提交是最熟悉的，直到和 reviewer 达成一致。

        